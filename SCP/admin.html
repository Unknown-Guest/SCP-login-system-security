<!DOCTYPE html>
<html>
<head>
<style>
    :root {
        --scp-green: #00ff88;
        --scp-green-soft: #66ffcc;
        --scp-red: #ff3f3f;
        --scp-gray: #555;
        --scp-gold: #ffcc00;
    }

    body {
        background-color: #000;
        margin: 0;
        padding: 40px;
        font-family: Arial, sans-serif;
        color: var(--scp-green);
    }

    h1 {
        font-size: 36px;
        text-align: center;
        margin-bottom: 30px;
        text-shadow: 0 0 2px var(--scp-green);
    }

    h2 {
        font-size: 26px;
        margin-top: 40px;
        margin-bottom: 15px;
        text-shadow: 0 0 2px var(--scp-green);
    }

    .request-item, .account-item {
        border: 1px solid var(--scp-green);
        padding: 12px;
        margin-bottom: 12px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: #050505;
        box-shadow: 0 0 4px #003000;
    }

    .admin-btn {
        padding: 6px 12px;
        font-size: 13px;
        cursor: pointer;
        border: 1px solid var(--scp-green);
        background: transparent;
        color: var(--scp-green);
        margin-left: 6px;
    }

    .admin-btn.allow {
        background: var(--scp-green);
        color: #000;
    }

    .admin-btn.delete {
        border-color: red;
        color: red;
    }

    .admin-btn.delete.disabled {
        border-color: var(--scp-gray);
        color: var(--scp-gray);
        cursor: not-allowed;
    }

    .star-btn {
        font-size: 22px;
        cursor: pointer;
        margin-right: 10px;
        user-select: none;
    }

    .star-off {
        color: var(--scp-gray);
    }

    .star-on {
        color: var(--scp-gold);
        text-shadow: 0 0 4px var(--scp-gold);
    }

    .access-btn {
        padding: 6px 12px;
        margin-left: 6px;
        border-radius: 4px;
        font-size: 13px;
        cursor: pointer;
        transition: 0.15s;
        border: 1px solid;
    }

    .access-on {
        background: #00ff88;
        color: #000;
        border-color: #00ff88;
        box-shadow: 0 0 8px #00ff88;
    }

    .access-off {
        background: #330000;
        color: #ff3f3f;
        border-color: #ff3f3f;
        box-shadow: 0 0 8px #ff3f3f;
    }
</style>
</head>

<body>

<h1>SCP ACCOUNT CONTROL PANEL</h1>

<h2>PENDING ACCOUNT REQUESTS</h2>
<div id="request-list"></div>

<h2>CURRENT ACCOUNTS</h2>
<div id="account-list"></div>

<script>
function safeArray(value) {
    return Array.isArray(value) ? value : [];
}

function loadRequests() {
    let pending = JSON.parse(localStorage.getItem("pendingAccounts")) || [];
    const list = document.getElementById("request-list");
    list.innerHTML = "";

    pending.forEach((entry, index) => {
        const div = document.createElement("div");
        div.className = "request-item";
        div.innerHTML = `
            <div>
                <div><b>Name:</b> ${entry.name}</div>
                <div><b>Username:</b> ${entry.username}</div>
                <div><b>Password:</b> ${entry.password}</div>
            </div>
            <div>
                <button class="admin-btn allow" onclick="approve(${index})">ALLOW</button>
                <button class="admin-btn" onclick="deny(${index})">DENY</button>
            </div>
        `;
        list.appendChild(div);
    });
}

function loadAccounts() {
    let accounts = JSON.parse(localStorage.getItem("approvedAccounts")) || [];
    const list = document.getElementById("account-list");
    list.innerHTML = "";

    accounts.forEach((entry, index) => {

        entry.access = safeArray(entry.access);
        entry.favorite = entry.favorite === true;

        const div = document.createElement("div");
        div.className = "account-item";

        div.innerHTML = `
            <div>
                <div><b>Name:</b> ${entry.name}</div>
                <div><b>Username:</b> ${entry.username}</div>
                <div><b>Password:</b> ${entry.password}</div>
                <div><b>Access:</b> ${entry.access.join(", ") || "None"}</div>
            </div>

            <div style="display:flex; align-items:center;">

                <span class="star-btn ${entry.favorite ? "star-on" : "star-off"}"
                      onclick="toggleFavorite(${index})">â˜…</span>

                <div class="access-controls">
                    ${makeAccessButton(entry, index, "Level 1")}
                    ${makeAccessButton(entry, index, "Level 2")}
                    ${makeAccessButton(entry, index, "Level 3")}
                    ${makeAccessButton(entry, index, "Admin")}
                    ${makeAccessButton(entry, index, "Security")}
                </div>

                <button class="admin-btn delete ${entry.favorite ? "disabled" : ""}"
                        onclick="${entry.favorite ? "" : `deleteAccount(${index})`}">
                    DELETE
                </button>
            </div>
        `;

        list.appendChild(div);
    });
}

function makeAccessButton(entry, index, role) {
    const active = entry.access.includes(role);
    return `
        <button class="access-btn ${active ? "access-on" : "access-off"}"
            onclick="toggleAccess(${index}, '${role}')">${role}</button>
    `;
}

function toggleFavorite(index) {
    let accounts = JSON.parse(localStorage.getItem("approvedAccounts")) || [];
    accounts[index].favorite = !accounts[index].favorite;
    localStorage.setItem("approvedAccounts", JSON.stringify(accounts));
    loadAccounts();
}

function toggleAccess(index, role) {
    let accounts = JSON.parse(localStorage.getItem("approvedAccounts")) || [];

    accounts[index].access = safeArray(accounts[index].access);

    if (accounts[index].access.includes(role)) {
        accounts[index].access = accounts[index].access.filter(r => r !== role);
    } else {
        accounts[index].access.push(role);
    }

    localStorage.setItem("approvedAccounts", JSON.stringify(accounts));
    loadAccounts();
}

function approve(index) {
    let pending = JSON.parse(localStorage.getItem("pendingAccounts")) || [];
    let accounts = JSON.parse(localStorage.getItem("approvedAccounts")) || [];

    const approved = {
        name: pending[index].name,
        username: pending[index].username,
        password: pending[index].password,
        access: [],
        favorite: false
    };

    accounts.push(approved);
    pending.splice(index, 1);

    localStorage.setItem("pendingAccounts", JSON.stringify(pending));
    localStorage.setItem("approvedAccounts", JSON.stringify(accounts));

    loadRequests();
    loadAccounts();
}

function deny(index) {
    let pending = JSON.parse(localStorage.getItem("pendingAccounts")) || [];
    pending.splice(index, 1);
    localStorage.setItem("pendingAccounts", JSON.stringify(pending));
    loadRequests();
}

function deleteAccount(index) {
    let accounts = JSON.parse(localStorage.getItem("approvedAccounts")) || [];
    accounts.splice(index, 1);
    localStorage.setItem("approvedAccounts", JSON.stringify(accounts));
    loadAccounts();
}

loadRequests();
loadAccounts();
</script>

</body>
</html>
